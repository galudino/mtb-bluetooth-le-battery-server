{
    // See https://go.microsoft.com/fwlink/?LinkId=733558
    // for the documentation about the tasks.json format
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Build",
            "type": "shell",
            "command": "bash",
            "args": [
                "--norc",
                "-c",
                "./scripts/build-mtb-example-btstack-freertos-battery-server-debug.sh nocopy"
            ],

            "windows": {
                "command": "${config:modustoolbox.toolsPath}/modus-shell/bin/bash.exe",
                "args": [
                    "--norc",
                    "-c",
                    "python3 -m venv ~/.mtb-venv",
                    "source ~/.mtb-venv/bin/activate",
                    "pip install click cryptography intelhex",
                    "export PATH=/bin:/usr/bin:$PATH ; ${config:modustoolbox.toolsPath}/modus-shell/bin/make.exe -j10 build",
                    "deactivate"
                ]
            },
            "problemMatcher": "$gcc",
            "group": {
                "kind": "build",
                "isDefault": true
            }
        },
        {
            "label": "Build Debug",
            "type": "shell",
            "command": "bash",
            "args": [
                "--norc",
                "-c",
                "./scripts/build-mtb-example-btstack-freertos-battery-server-debug.sh nocopy"
            ],

            "windows": {
                "command": "${config:modustoolbox.toolsPath}/modus-shell/bin/bash.exe",
                "args": [
                    "--norc",
                    "-c",
                    "python3 -m venv ~/.mtb-venv",
                    "source ~/.mtb-venv/bin/activate",
                    "pip install click cryptography intelhex",
                    "export PATH=/bin:/usr/bin:$PATH ; ${config:modustoolbox.toolsPath}/modus-shell/bin/make.exe -j10 build CONFIG=\"Debug\"",
                    "deactivate"
                ]
            },
            "problemMatcher": "$gcc",
            "group": {
                "kind": "build"
            }
        },
        {
            "label": "Build Release",
            "type": "shell",
            "command": "bash",
            "args": [
                "--norc",
                "-c",
                "./scripts/build-mtb-example-btstack-freertos-battery-server-release.sh nocopy"
            ],

            "windows": {
                "command": "${config:modustoolbox.toolsPath}/modus-shell/bin/bash.exe",
                "args": [
                    "--norc",
                    "-c",
                    "python3 -m venv ~/.mtb-venv",
                    "source ~/.mtb-venv/bin/activate",
                    "pip install click cryptography intelhex",
                    "export PATH=/bin:/usr/bin:$PATH ; ${config:modustoolbox.toolsPath}/modus-shell/bin/make.exe -j10 build CONFIG=\"Release\"",
                    "deactivate"
                ]
            },
            "problemMatcher": "$gcc",
            "group": {
                "kind": "build"
            }
        },
        {
            "label": "Rebuild",
            "dependsOrder": "sequence",
            "dependsOn": ["Clean", "Build"],
            "group": {
                "kind": "build"
            }
        },
        {
            "label": "Rebuild Debug",
            "dependsOrder": "sequence",
            "dependsOn": ["Clean", "Build Debug"],
            "group": {
                "kind": "build"
            }
        },
        {
            "label": "Rebuild Release",
            "dependsOrder": "sequence",
            "dependsOn": ["Clean", "Build Release"],
            "group": {
                "kind": "build"
            }
        },
        {
            "label": "Clean",
            "type": "process",
            "command": "bash",
            "args": ["--norc", "-c", "make clean"],

            "windows": {
                "command": "${config:modustoolbox.toolsPath}/modus-shell/bin/bash.exe",
                "args": [
                    "--norc",
                    "-c",
                    "export PATH=/bin:/usr/bin:$PATH ; ${config:modustoolbox.toolsPath}/modus-shell/bin/make.exe clean"
                ]
            },
            "group": {
                "kind": "build"
            }
        },
        {
            "label": "Program",
            "type": "process",
            "command": "bash",
            "args": [
                "--norc",
                "-c",
                "./scripts/program-mtb-example-btstack-freertos-battery-server-release.sh"
            ],

            "windows": {
                "command": "${config:modustoolbox.toolsPath}/modus-shell/bin/bash.exe",
                "args": [
                    "--norc",
                    "-c",
                    "python3 -m venv ~/.mtb-venv",
                    "source ~/.mtb-venv/bin/activate",
                    "pip install click cryptography intelhex",
                    "export PATH=/bin:/usr/bin:$PATH ; ${config:modustoolbox.toolsPath}/modus-shell/bin/make.exe -j10 program CONFIG=\"Release\"",
                    "deactivate"
                ]
            },
            "problemMatcher": "$gcc",
            "group": {
                "kind": "build"
            }
        },
        {
            "label": "Program Debug",
            "type": "process",
            "command": "bash",
            "args": [
                "--norc",
                "-c",
                "./scripts/program-mtb-example-btstack-freertos-battery-server-debug.sh"
            ],

            "windows": {
                "command": "${config:modustoolbox.toolsPath}/modus-shell/bin/bash.exe",
                "args": [
                    "--norc",
                    "-c",
                    "python3 -m venv ~/.mtb-venv",
                    "source ~/.mtb-venv/bin/activate",
                    "pip install click cryptography intelhex",
                    "export PATH=/bin:/usr/bin:$PATH ; ${config:modustoolbox.toolsPath}/modus-shell/bin/make.exe -j10 program CONFIG=\"Debug\"",
                    "deactivate"
                ]
            },
            "problemMatcher": "$gcc",
            "group": {
                "kind": "build"
            }
        },
        {
            "label": "Program Release",
            "type": "shell",
            "command": "bash",
            "args": [
                "--norc",
                "-c",
                "./scripts/program-mtb-example-btstack-freertos-battery-server-release.sh"
            ],

            "windows": {
                "command": "${config:modustoolbox.toolsPath}/modus-shell/bin/bash.exe",
                "args": [
                    "--norc",
                    "-c",
                    "python3 -m venv ~/.mtb-venv",
                    "source ~/.mtb-venv/bin/activate",
                    "pip install click cryptography intelhex",
                    "export PATH=/bin:/usr/bin:$PATH ; ${config:modustoolbox.toolsPath}/modus-shell/bin/make.exe -j10 program CONFIG=\"Release\"",
                    "deactivate"
                ]
            },
            "problemMatcher": "$gcc",
            "group": {
                "kind": "build"
            }
        },
        {
            "label": "Build combined MCUBootApp and mtb-example-btstack-freertos-battery-server hex file (Debug)",
            "type": "shell",
            "command": "bash",
            "args": [
                "--norc",
                "-c",
                "./scripts/build-combined-mcuboot-app-and-mtb-example-btstack-freertos-battery-server-debug.sh"
            ],

            "windows": {
                // TODO: Add Windows support
            },
            "problemMatcher": "$gcc",
            "group": {
                "kind": "build"
            }
        },
        {
            "label": "Build combined MCUBootApp and mtb-example-btstack-freertos-battery-server hex file (Release)",
            "type": "shell",
            "command": "bash",
            "args": [
                "--norc",
                "-c",
                "./scripts/build-combined-mcuboot-app-and-mtb-example-btstack-freertos-battery-server-release.sh"
            ],

            "windows": {
                // TODO: Add Windows support
            },
            "problemMatcher": "$gcc",
            "group": {
                "kind": "build"
            }
        },
        {
            "label": "Erase Device",
            "type": "process",
            "command": "bash",
            "args": ["--norc", "-c", "make -j10 erase"],

            "windows": {
                "command": "${config:modustoolbox.toolsPath}/modus-shell/bin/bash.exe",
                "args": [
                    "--norc",
                    "-c",
                    "export PATH=/bin:/usr/bin:$PATH ; ${config:modustoolbox.toolsPath}/modus-shell/bin/make.exe -j10 erase"
                ]
            },
            "group": {
                "kind": "build"
            }
        },
        {
            "label": "Tool: Library Manager",
            "type": "process",
            "command": "bash",
            "args": ["--norc", "-c", "make modlibs MTB__JOB_BACKGROUND="],
            "windows": {
                "command": "${config:modustoolbox.toolsPath}/modus-shell/bin/bash.exe",
                "args": [
                    "--norc",
                    "-c",
                    "export PATH=/bin:/usr/bin:$PATH ; ${config:modustoolbox.toolsPath}/modus-shell/bin/make.exe modlibs MTB__JOB_BACKGROUND="
                ]
            }
        }
    ]
}
